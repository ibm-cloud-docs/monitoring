---

copyright:
  years: 2017, 2019

lastupdated: "2019-03-06"

keywords: IBM Cloud, monitoring

subcollection: cloud-monitoring

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:pre: .pre}
{:table: .aria-labeledby="caption"}
{:codeblock: .codeblock}
{:tip: .tip}
{:download: .download}
{:important: .important}
{:note: .note}


# Grafana ダッシュボードの作成
{:#create_grafana_dashboard}

カスタム Grafana ダッシュボードを作成して、{{site.data.keyword.Bluemix}} 組織のスペース内で実行されるすべてのコンテナーのメトリックを表示します。
{:shortdesc}

以下の手順を実行して、Grafana ダッシュボードを作成します。

1. Web ブラウザーから Grafana を起動します。 詳しくは、[Web ブラウザーから Grafana ダッシュボードへのナビゲート](/docs/services/cloud-monitoring/grafana?topic=cloud-monitoring-navigating_grafana#launch_grafana_from_browser)を参照してください。

2. デフォルト・ダッシュボードを保存します。

    1. ツールバーで、「保存」アイコンをクリックします。
    2. ダッシュボードの名前を入力します。
    3. 名前フィールドの横の「保存」アイコンをクリックします。
   
3. ダッシュボードでの作業中は、自動ページ更新を無効にします。 

    1. ヘッダーにあるタイム・ピッカーをクリックします。
    2. **「Auto-refresh」**を選択します。
    3. **「Off」**をクリックします。
 
 5. サンプル行を削除します。
 
     1. *「Welcome to Grafana」*ヘッダーの横にある行メニュー・スライダーにカーソルを移動して、スライド・アウトする行メニュー・アイコンをクリックします。
     2. **「Delete row」**をクリックし、**「Yes」**をクリックします。
     
     上記の手順を繰り返して、Documentation Links と First Graph の行を削除します。 
     
     ページ・ヘッダーで、データを参照できるようにタイム・ピッカーを調整します。 デフォルト値は数秒前までの 6 時間です。 **「Last 30d」**を選択します。
     
6. 視覚化を追加します。

    * CPU アイドルの視覚化を追加するには、[CPU アイドル視覚化の追加](/docs/services/cloud-monitoring/grafana/create_grafana_dashboard.html#grafana_add_cpu)を参照してください。
    * 使用メモリーの視覚化を追加するには、[使用メモリー視覚化の追加](/docs/services/cloud-monitoring/grafana/create_grafana_dashboard.html#grafana_add_mem)を参照してください。
        
7. カスタム・ダッシュボードを保存します。

    1. ツールバーで、「保存」アイコンをクリックします。
    2. ダッシュボードの名前を入力します。
    3. 名前フィールドの横の「保存」アイコンをクリックします。
    

## CPU アイドル視覚化の追加
{:#grafana_add_cpu}

スペース内の全コンテナーからのデータが組み込まれた CPU アイドル・グラフを追加するには、以下の手順を実行します。

1. **「Add a row」**ボタンをクリックします。 行メニュー・スライダーが行の横に表示されます。
    
2. 行メニュー・スライダーにカーソルを移動して、スライド・アウトする行メニュー・アイコンをクリックします。

3. **「Add Panel」**をクリックします。 **「graph」**をクリックします。

4. グラフのタイトルをクリックしてパネル・メニューを開き、**「Edit」**をクリックします。 

    ダッシュボードの他の部分は非表示になり、このグラフのエディターとグラフのプレビューだけが表示されます。
    
5. 「Metrics」タブで、グラフのデータを収集する照会を作成します。 

    例えば、{{site.data.keyword.Bluemix_notm}} が管理するクラウド・インフラストラクチャーにデプロイされたコンテナーを処理する場合、照会フォーマットには、スペース ID、コンテナー・グループ ID、および単一コンテナー・インスタンス ID が `space_ID.group_ID.instance_ID.metric` のフォーマットで含まれます。
        
    1. A 行で**「Select metric」**をクリックします。 次に、スペース ID を選択します。
    2. **「Select metric」**をクリックし、アスタリスク (&#xa5;*) を選択します。
    
    (&#xa5;*) を選択すると、スペース内のすべてのコンテナー・グループからのメトリックがデータに含まれます。 オプションで、正規表現を使用してこのフォーマットを操作し、特定のコンテナーからのメトリックだけが含まれるようにすることもできます。 例えば、単一コンテナーからのメトリックだけを表示してコンテナー・グループからのものは除外する場合、**「Select metric」**をクリックし、**「0000」**を選択します。
        
    3. **「Select metric」**をクリックし、アスタリスク (&#xa5;*) を再度選択します。 このフォーマットにより、スペース内のすべての単一コンテナーからのメトリックが含められます。
        
    4. **「Select metric」**と**「cpu-0」**をクリックします。
        
    5. **「Select metric」**と**「cpu-idle」**をクリックします。 グラフ・プレビューが更新されて、この照会に一致するメトリックが表示されます。
    
6. オプション: グラフの表示をカスタマイズします。
    
    * グラフに名前を指定するために、「General」タブをクリックし、「Title」フィールドにグラフの名前 (例えば、「CPU Idle」など) を入力します。
    * 垂直軸にラベルを付けるために、「Axes and grid」タブをクリックし、「Left Y Axis」セクションの「Label」フィールドに「CPU」と入力します。
    * グラフの背景色を変更するために、「Grid thresholds」セクションの「Level 2」で、背景色ピッカー・アイコンをクリックして背景色を白または明るいグレイに変更します。
    
    ヘッダーで、**「Back to dashboard」**をクリックします。
    
7. このダッシュボードに対して行った変更を保存するには、ヘッダーの「Save」アイコンをクリックしてから、メニューの「Save」アイコンをクリックします。


## 使用メモリー視覚化の追加
{:#grafana_add_mem}

使用済みメモリーの視覚化を追加するには、以下の手順を実行します。

1. 「Add a row」ボタンをクリックします。 行メニュー・スライダーが行の横に表示されます。
   
2. 行メニュー・スライダーにカーソルを移動して、スライド・アウトする行メニュー・アイコンをクリックします。

    1. 「Add Panel」>「graph」とクリックします。
    2. 「編集」をクリックします。 ダッシュボードの他の部分は非表示になり、このグラフのエディターとグラフのプレビューだけが表示されます。
    
3. 「Metrics」タブで、グラフのデータを収集する照会を作成します。 

    例えば、{{site.data.keyword.Bluemix_notm}} が管理するクラウド・インフラストラクチャーにデプロイされたコンテナーを処理する場合、照会フォーマットには、スペース ID、コンテナー・グループ ID、単一コンテナー・インスタンス ID が space_ID.group_ID.instance_ID.metric のフォーマットで含まれます。
        
    1. A 行で**「Select metric」**をクリックします。 次に、スペース ID を選択します。
    2. **「Select metric」**をクリックし、アスタリスク (&#xa5;*) を選択します。
    
    (&#xa5;*) を選択すると、スペース内のすべてのコンテナー・グループからのメトリックがデータに含まれます。 オプションで、正規表現を使用してこのフォーマットを操作し、特定のコンテナーからのメトリックだけが含まれるようにすることもできます。 例えば、単一コンテナーからのメトリックだけを表示してコンテナー・グループからのものは除外する場合、**「Select metric」**をクリックし、**「0000」**を選択します。
    
    3. **「Select metric」**をクリックし、アスタリスク (&#xa5;*) を再度選択します。 このフォーマットにより、スペース内のすべての単一コンテナーからのメトリックが含められます。
        
    4. **「Select metric」**と**「memory」**をクリックします。
        
    5. **「Select metric」**と**「memory-used」**をクリックします。 グラフ・プレビューが更新されて、この照会に一致するメトリックが表示されます。
    
6. オプション: グラフの表示をカスタマイズします。
    
    * グラフに名前を指定するために、「General」タブをクリックし、「Title」フィールドにグラフの名前 (例えば、「Memory Used」など) を入力します。
    *  垂直軸値のフォーマットを変更するために、「Axes and grid」タブをクリックし、「Left Y Axis」セクションの「Format」で「bytes」を選択します。
    * 垂直軸にラベルを付けるために、「Label」フィールドに「Memory」と入力します。
    * グラフの背景色を変更するために、「Grid thresholds」セクションの「Level 2」で、背景色ピッカー・アイコンをクリックして背景色を白または明るいグレイに変更します。
    
    ヘッダーで、**「Back to dashboard」**をクリックします。

7. このダッシュボードに対して行った変更を保存するには、ヘッダーの「Save」アイコンをクリックしてから、メニューの「Save」アイコンをクリックします。

